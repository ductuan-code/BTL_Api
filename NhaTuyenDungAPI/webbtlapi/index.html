<!DOCTYPE html>
<html lang="vi" ng-app="EmployerApp">
<head>
<meta charset="UTF-8">
<title>Employer Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="style.css">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
<script src="app.js"></script>
</head>

<body ng-controller="MainCtrl">

<div class="layout">

<!-- ===== SIDEBAR ===== -->
<aside class="sidebar">
  <h2>EMPLOYER</h2>
  <button ng-click="setPage('companies')">ğŸ¢ CÃ´ng ty</button>
  <button ng-click="setPage('jobs')">ğŸ’¼ Viá»‡c lÃ m</button>
  <button ng-click="setPage('applications')">ğŸ“„ ÄÆ¡n á»©ng tuyá»ƒn</button>
  <button ng-click="setPage('interviews')">ğŸ“… Phá»ng váº¥n</button>
  <button ng-click="setPage('offers')">ğŸ’Œ Offer</button>
</aside>

<!-- ===== CONTENT ===== -->
<main class="content">

<!-- ================= CÃ”NG TY ================= -->
<section ng-show="page==='companies'">
<h2>CÃ´ng ty</h2>

<div class="card">
<h3>ThÃªm / Sá»­a cÃ´ng ty</h3>
<input ng-model="companyForm.tenCongTy" placeholder="TÃªn cÃ´ng ty">
<input ng-model="companyForm.website" placeholder="Website">
<input ng-model="companyForm.moTa" placeholder="MÃ´ táº£">
<button ng-click="saveCompany()">ğŸ’¾ LÆ°u</button>
<button ng-if="companyForm.maCongTy" ng-click="resetCompany()">â†© Há»§y</button>
</div>

<table>
<tr><th>TÃªn</th><th>Website</th><th>MÃ´ táº£</th><th></th></tr>
<tr ng-repeat="c in companies">
<td>{{c.tenCongTy}}</td>
<td>{{c.website}}</td>
<td>{{c.moTa}}</td>
<td>
<button ng-click="editCompany(c)">âœï¸</button>
<button ng-click="deleteCompany(c.maCongTy)">ğŸ—‘</button>
</td>
</tr>
</table>
</section>

<!-- ================= VIá»†C LÃ€M ================= -->
<section ng-show="page==='jobs'">
<h2>Viá»‡c lÃ m</h2>

<div class="card">
<h3>ÄÄƒng / Sá»­a viá»‡c lÃ m</h3>

<select ng-model="jobForm.maCongTy"
 ng-options="c.maCongTy as c.tenCongTy for c in companies">
<option value="">-- CÃ´ng ty --</option>
</select>

<input ng-model="jobForm.tieuDe" placeholder="TiÃªu Ä‘á»">
<input ng-model="jobForm.diaDiem" placeholder="Äá»‹a Ä‘iá»ƒm">
<input ng-model="jobForm.loaiHinhCongViec" placeholder="Loáº¡i hÃ¬nh">

<textarea ng-model="jobForm.moTa" placeholder="MÃ´ táº£"></textarea>
<textarea ng-model="jobForm.yeuCau" placeholder="YÃªu cáº§u"></textarea>
<textarea ng-model="jobForm.trachNhiem" placeholder="TrÃ¡ch nhiá»‡m"></textarea>

<input type="number" ng-model="jobForm.luongToiThieu" placeholder="LÆ°Æ¡ng min">
<input type="number" ng-model="jobForm.luongToiDa" placeholder="LÆ°Æ¡ng max">
<input type="date" ng-model="jobForm.ngayHetHan">

<button ng-click="saveJob()">ğŸ’¾ LÆ°u</button>
<button ng-if="jobForm.maViecLam" ng-click="resetJob()">â†© Há»§y</button>
</div>

<table>
<tr>
<th>TiÃªu Ä‘á»</th><th>Äá»‹a Ä‘iá»ƒm</th><th>LÆ°Æ¡ng</th>
<th>Duyá»‡t</th><th>Hiá»ƒn thá»‹</th><th></th>
</tr>
<tr ng-repeat="j in jobs">
<td>{{j.tieuDe}}</td>
<td>{{j.diaDiem}}</td>
<td>{{j.luongToiThieu}} - {{j.luongToiDa}}</td>
<td>{{j.daDuyet}}</td>
<td>{{j.duocHienThi}}</td>
<td>
<button ng-click="viewJob(j.maViecLam)">ğŸ‘</button>
<button ng-click="editJob(j)">âœï¸</button>
<button ng-click="toggleJob(j.maViecLam)">ğŸ‘â€ğŸ—¨</button>
<button ng-click="deleteJob(j.maViecLam)">ğŸ—‘</button>
</td>
</tr>
</table>

<div class="card" ng-if="jobDetail">
<h3>Chi tiáº¿t viá»‡c lÃ m</h3>
<p><b>MÃ´ táº£:</b> {{jobDetail.moTa}}</p>
<p><b>YÃªu cáº§u:</b> {{jobDetail.yeuCau}}</p>
<p><b>TrÃ¡ch nhiá»‡m:</b> {{jobDetail.trachNhiem}}</p>
</div>
</section>

<!-- ================= ÄÆ N á»¨NG TUYá»‚N ================= -->
<section ng-show="page==='applications'">
<h2>ÄÆ¡n á»©ng tuyá»ƒn</h2>

<select ng-model="selectedJob"
 ng-options="j.maViecLam as j.tieuDe for j in jobs">
<option value="">-- Chá»n viá»‡c --</option>
</select>
<button ng-click="loadApplications()">Xem</button>

<table>
<tr><th>MÃ£ Ä‘Æ¡n</th><th>Tráº¡ng thÃ¡i</th><th>NgÃ y</th><th></th></tr>
<tr ng-repeat="d in applications">
<td>{{d.maDon}}</td>
<td>{{d.trangThai}}</td>
<td>{{d.ngayNop | date:'dd/MM/yyyy'}}</td>
<td>
<button ng-click="updateDon(d.maDon,'interviewing')">ğŸ“… PV</button>
<button ng-click="updateDon(d.maDon,'rejected')">âŒ</button>
<button ng-click="prepareOffer(d.maDon)">ğŸ’Œ Offer</button>
</td>
</tr>
</table>
</section>

<!-- ================= PHá»NG Váº¤N ================= -->
<section ng-show="page==='interviews'">
<h2>Phá»ng váº¥n</h2>

<div class="card">
<h3>Táº¡o / Sá»­a phá»ng váº¥n</h3>
<input ng-model="interviewForm.maDon" placeholder="MÃ£ Ä‘Æ¡n">
<input type="datetime-local" ng-model="interviewForm.thoiGian">
<input ng-model="interviewForm.diaDiem" placeholder="Äá»‹a Ä‘iá»ƒm">
<input ng-model="interviewForm.thoiLuong" placeholder="Thá»i lÆ°á»£ng">
<button ng-click="saveInterview()">ğŸ’¾ LÆ°u</button>
</div>

<table>
<tr><th>MÃ£ Ä‘Æ¡n</th><th>Thá»i gian</th><th>Äá»‹a Ä‘iá»ƒm</th><th>Tráº¡ng thÃ¡i</th><th></th></tr>
<tr ng-repeat="p in interviews">
<td>{{p.maDon}}</td>
<td>{{p.thoiGian | date:'dd/MM/yyyy HH:mm'}}</td>
<td>{{p.diaDiem}}</td>
<td>{{p.trangThai}}</td>
<td>
<button ng-click="editInterview(p)">âœï¸</button>
<button ng-click="updateInterviewStatus(p.maPhongVan,'done')">âœ”</button>
<button ng-click="updateInterviewStatus(p.maPhongVan,'cancelled')">âŒ</button>
</td>
</tr>
</table>
</section>

<!-- ================= OFFER ================= -->
<section ng-show="page==='offers'">
<h2>Offer</h2>

<div class="card">
<h3>Gá»­i Offer</h3>
<input ng-model="offerForm.maDon" placeholder="MÃ£ Ä‘Æ¡n">
<input ng-model="offerForm.mucLuongDeXuat" placeholder="LÆ°Æ¡ng">
<input ng-model="offerForm.donViTienTe" placeholder="VND/USD">
<input ng-model="offerForm.phucLoi" placeholder="PhÃºc lá»£i">
<button ng-click="sendOffer()">ğŸ“¤ Gá»­i</button>
</div>

<div class="card">
<h3>Xem Offer</h3>
<input ng-model="maDonOffer" placeholder="MÃ£ Ä‘Æ¡n">
<button ng-click="loadOffer()">ğŸ”</button>

<div ng-if="offer">
<p>LÆ°Æ¡ng: {{offer.mucLuongDeXuat}} {{offer.donViTienTe}}</p>
<p>PhÃºc lá»£i: {{offer.phucLoi}}</p>
<p>Tráº¡ng thÃ¡i: {{offer.trangThai}}</p>
<button ng-click="updateOfferStatus('accepted')">âœ”</button>
<button ng-click="updateOfferStatus('rejected')">âŒ</button>
</div>
</div>
</section>

</main>
</div>
</body>
</html>
